<!DOCTYPE html>
<html lang="en">
  <!-- Head tag -->
  <head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Title -->
  
  <title>Procedural Monster - Jiayu He</title>

  <!--Favicon-->
  <link rel="icon" href="favicon/favicon.ico">

  <!--Description-->
  
      <meta name="description" content="A real-time softbody and locomotion simulator &amp; a procedural monster generator.">
  

  <!--Author-->
  
      <meta name="author" content="Jiayu He">
  

  <!-- Pure CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css?family=Crimson+Text|Open+Sans:300,800" rel="stylesheet">

  <!-- Custom CSS -->
  
<link rel="stylesheet" href="/css/styles.css">


  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- Google Analytics -->
  

<meta name="generator" content="Hexo 6.3.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>




  <body>
  	<!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container-fluid navbar-container m-sm-5">
      <!-- Header -->
      <nav class="navbar navbar-toggleable-sm navbar-light px-1 py-3 my-3 mb-sm-5">
  <a class="navbar-brand ml-2" href="/">Jiayu He</a>
  <button class="navbar-toggler navbar-toggler-right py-2" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse text-center" id="navbarCollapse">
    <ul class="navbar-nav ml-auto my-auto">
      
        <li class="nav-item">
          <a class="nav-link" href="/reel">Reel</a>
        </li>
      
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
      
        <li class="nav-item">
          <a class="nav-link" href="/contact">Contact</a>
        </li>
      
        <li class="nav-item">
          <a class="nav-link" target="_blank" rel="noopener" href="https://www.instagram.com/jiayuhe511/">Instagram</a>
        </li>
      
        <li class="nav-item">
          <a class="nav-link" target="_blank" rel="noopener" href="https://www.linkedin.com/in/jiayu-he-389213145/">LinkedIn</a>
        </li>
      
    </ul>
    <hr class="hidden-md-up" />
  </div>
</nav>

  		<div class="row">
  			<div class="col-lg-4 col-12 pt-3 px-4 pr-lg-5">
  <h1>Procedural Monster</h1>
</div>
<div class="col-lg-8 col-12 pt-lg-3 mb-4 pl-lg-5 px-lg-0 px-4 portfolio-content">
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="Procedural-Monster"><a href="#Procedural-Monster" class="headerlink" title="Procedural Monster"></a>Procedural Monster</h1><h5 id="Project-Info"><a href="#Project-Info" class="headerlink" title="Project Info:"></a>Project Info:</h5><ul>
<li>Personal Artwork</li>
<li>Unity &amp; C# &amp; Houdini Kinefx</li>
<li>Programmer &amp; Technical Artist</li>
<li>Procedural Animation &amp; Procedural Rigging &amp; Softbody Simulation</li>
</ul>
<p><a href="monster_demo_3.gif" title="monster_demo_3" class="gallery-item"><img src="monster_demo_3.gif" alt="monster_demo_3"></a></p>
<p>This is the final project of the 15664 Technical Animation Course, which was completed by me and Grace. Our algorithm implements the following functions:</p>
<ul>
<li>Houdini procedural monsters generation.</li>
<li>soft body systems with collision.</li>
<li>Procedural locomotion system.</li>
</ul>
<p>It is implemented in <strong>Houdini</strong> and <strong>Unity</strong> engine. The showcases are all in real-time.</p>
<hr>
<h3 id="Generate-Procedural-Monster-Mesh-and-Rigging-Houdini"><a href="#Generate-Procedural-Monster-Mesh-and-Rigging-Houdini" class="headerlink" title="Generate Procedural Monster Mesh and Rigging (Houdini)"></a>Generate Procedural Monster Mesh and Rigging (Houdini)</h3><p>This is a system that includes procedurally generated monster meshes and a system that uses <strong>kinefx</strong> for procedural rigging. </p>
<p>Our inspiration came from the monsters in “Inside” and the demons in “Chainsaw Man”. </p>
<p><a href="image-20230423211312556.png" title="image-20230423211312556" class="gallery-item"><img src="image-20230423211312556.png" alt="image-20230423211312556"></a></p>
<h4 id="Mesh-generation-body"><a href="#Mesh-generation-body" class="headerlink" title="Mesh generation (body)"></a>Mesh generation (body)</h4><p>Our tool allows artists to customize the position and direction of each muscle/functional block (prefab). They can put them freely.</p>
<p><a href="monster_mesh_adjust_size.gif" title="monster_mesh_adjust_size" class="gallery-item"><img src="monster_mesh_adjust_size.gif" alt="monster_mesh_adjust_size"></a></p>
<p>Once defined, an algorithm calculates the muscle/ligament connections between each muscle block. Specifically, when traversing the connections of each muscle block, I use a prefab to cut open each muscle’s connection port and connect these two connection ports using “polybridge “to produce the effect of muscles/ligaments.</p>
<p>The detailed algorithm to build a muscle connection given two meat points will be.</p>
<p><a href="image-20230424012306865.png" class="gallery-item"><img src="image-20230424012306865.png" style="zoom: 25%;" /></a></p>
<p>as the result:</p>
<p><a href="monster_muscle_connection.gif" class="gallery-item"><img src="monster_muscle_connection.gif" alt=""></a></p>
<p>So we have:</p>
<p><a href="monster_connection_all.gif" class="gallery-item"><img src="monster_connection_all.gif" alt=""></a></p>
<h4 id="Mesh-generation-legs"><a href="#Mesh-generation-legs" class="headerlink" title="Mesh generation (legs)"></a>Mesh generation (legs)</h4><p>We allow the player to customize the number of legs. The algorithm is based on the existing functional prefabs, and we can roughly determine the position of the center of gravity from them. The goal of generating legs is to cover this <strong>center of gravity</strong> point as much as possible. Similarly, the legs come from prefabs, and you can put your favorite leg models into this system.</p>
<p><a href="monster_foot_gen.gif" class="gallery-item"><img src="monster_foot_gen.gif" alt=""></a></p>
<p>this is how center of gravity influences leg generation. It looks more physically correct.</p>
<p><a href="monster_foot_cg.gif" class="gallery-item"><img src="monster_foot_cg.gif" alt=""></a></p>
<h4 id="KineFX-Rigging"><a href="#KineFX-Rigging" class="headerlink" title="KineFX Rigging"></a>KineFX Rigging</h4><p>This is my first time using kinefx. I think the most exciting feature is that I can transform a point-line model into a skeletal system. However, it is actually very tricky to use. There are two things to note about skeleton conversion:</p>
<ul>
<li>The parent-child relationship is inferred through “@ptnum” ascending order, and the parent-child relationship must be continuous.</li>
<li>Branching out is not supported. Branching out will generate a new single-chain parent-child relationship separately.</li>
</ul>
<p>Therefore, after obtaining the positions of the functional blocks placed by the artist, the algorithm will connect to each functional block starting from the root node. But this must be an existing root point, forced to make its ptnum smaller than the ptnum of other functional points (otherwise, the skeleton node cannot infer the parent-child relationship), so we can only use the point clouds as a reference and regenerate them in order.</p>
<p><a href="image-20230424020051695.png" class="gallery-item"><img src="image-20230424020051695.png" alt=""></a></p>
<h5 id="Biharmonic-skinning-vs-Proximity-Skinning"><a href="#Biharmonic-skinning-vs-Proximity-Skinning" class="headerlink" title="Biharmonic skinning vs. Proximity Skinning:"></a>Biharmonic skinning vs. Proximity Skinning:</h5><p>I tested the results of two skinning methods, and it is clearly more reasonable to use biharmonic, but it is painfully slow. My inference is that by dividing the skeleton into more regions for weight diffusion, biharmonic has more accurate characteristic features of the geometry.</p>
<p><a href="monster_rigging.gif" class="gallery-item"><img src="monster_rigging.gif" alt=""></a></p>
<hr>
<h3 id="Softbody-System"><a href="#Softbody-System" class="headerlink" title="Softbody System"></a>Softbody System</h3><p>This part is a mass-spring system, similar to cloth. It is worth noting that our current skeleton tree diagram is not the complete representation of each particle connection. We need to configure a <strong>connected graph</strong> on the basis of the <strong>tree</strong> to express the connection of each particle.</p>
<p><a href="image-20230424035856993.png" class="gallery-item"><img src="image-20230424035856993.png" style="zoom:50%;" /></a></p>
<p><a href="image-20230424035705992.png" class="gallery-item"><img src="image-20230424035705992.png" alt=""></a></p>
<p>Our method is to calculate the neighbors within a certain range while configuring, and generate spring relationships. After collecting all neighbor information, we will record the neighbors’ neighbors and establish bending springs with them. Unlike in 2D plane for cloth, where shear springs need to be established, in 3D, establishing stretch springs can avoid shear problems, so there are only bending springs (with second-level neighbors) and stretch springs (with first-level neighbors).</p>
<p>Below are some simulation effects.</p>
<p><a href="monster_softbody_1.gif" class="gallery-item"><img src="monster_softbody_1.gif" alt=""></a></p>
<p>Some collision demo ^^ You can play around with it.</p>
<p><a href="softbody_demo.gif" title="softbody_demo" class="gallery-item"><img src="softbody_demo.gif" alt="softbody_demo"></a></p>
<hr>
<h3 id="Locomotion-System"><a href="#Locomotion-System" class="headerlink" title="Locomotion System"></a>Locomotion System</h3><h5 id="Legs-Driven-Locomotion"><a href="#Legs-Driven-Locomotion" class="headerlink" title="Legs Driven Locomotion"></a>Legs Driven Locomotion</h5><p>I’m using the procedural locomotion algorithm I wrote before, which supports any number of leg poses and any speed of movement. You can read about it <a target="_blank" rel="noopener" href="https://iota11.github.io/2023/01/09/procedural_locomotion/">here</a>. </p>
<p>The current locomotion algorithm is that when a destination is set, the legs will drive the whole meat towards the direction.</p>
<p><a href="monster_demo_bone.gif" title="monster_demo_bone" class="gallery-item"><img src="monster_demo_bone.gif" alt="monster_demo_bone"></a></p>
<p>It looks good now. But not 100% correct, what we want to achieve is that: this monster is insane and they will insanely <strong>move the body first and the legs will simply compensate</strong> the keep body upright. How do we gonna achieve that?</p>
<h5 id="Body-Driven-Locomotion"><a href="#Body-Driven-Locomotion" class="headerlink" title="Body Driven Locomotion"></a>Body Driven Locomotion</h5><p>The easiest way to achieve “legs follow body” could be that we move the body towards the destination first and then make the center of legs area to chase the body. </p>
<p> But this method is still not so ideal, Since the reason why animals or like our human lean forward when we speed up is to create <strong>acceleration</strong>. </p>
<p><strong>Acceleration Driven Locomotion</strong></p>
<p>So this is much more complicated. When a destination is set, the monster will set the ideal velocity and the ideal acceleration to achieve this velocity. To create this acceleration, the up control of meat will firstly move forward to the relative distance that could achieve this  acceleration. You can see the difference of algorithm from the flowchart below.</p>
<p><a href="image-20230526004252800.png" title="image-20230526004252800" class="gallery-item"><img src="image-20230526004252800.png" alt="image-20230526004252800"></a></p>
<p>And the from the result, you can see that:</p>
<p>When moving forward, the Acceleration Driven one will firstly move legs backwards and push body forward to create the acceleration, then it will move. And when braking, the body will lean backward and it will oscillate to settle down in the destination. It takes more time to move and slow down, but much more physically correct, since the nobody can achieve the speed instantly. We all take time, so do monsters ^^ </p>
<p><a href="softbody_demo_compare.gif" title="softbody_demo_compare" class="gallery-item"><img src="softbody_demo_compare.gif" alt="softbody_demo_compare"></a></p>
<p>The figure below shows the relationship (relative distance) between center of body and center of legs. You can read that the legs are more proactively moving to create the acceleration than the Body Driven one.  (note that, yellow is center of body and blue dot are center of legs)</p>
<p><a href="softbody_demo_compare_2.gif" title="softbody_demo_compare_2" class="gallery-item"><img src="softbody_demo_compare_2.gif" alt="softbody_demo_compare_2"></a></p>
<hr>
<h3 id="Final-Result-and-Discussion"><a href="#Final-Result-and-Discussion" class="headerlink" title="Final Result and Discussion"></a>Final Result and Discussion</h3><p>I think it is cool ^^</p>
<p><a href="monster_demo_3.gif" class="gallery-item"><img src="monster_demo_3.gif" alt=""></a></p>
<p>There is only one unsatisfying things. The rigging of meat didn’t keep the volume of each meat balls, bone weights are too evenly distributed and make everything equally soft. This requires a much detailed implementation of Houdini KineFX  Procedural Rigging system and I am still working on it! </p>
<p>Here is a good reference about procedural weighting if you are interested too. </p>
<p>Cheer!</p>
</div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script src="https://github.com/sachinchoolur/lg-thumbnail.js"></script><script src="https://github.com/sachinchoolur/lg-zoom.js"></script><script src="https://github.com/sachinchoolur/lg-autoplay.js"></script><script src="https://github.com/sachinchoolur/lg-fullscreen.js"></script><script src="https://github.com/sachinchoolur/lg-pager.js"></script><script src="https://github.com/sachinchoolur/lg-video.js"></script><script src="https://github.com/sachinchoolur/lg-hash.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script>
</div>


      </div>
      
  	</div>

    <!-- After footer scripts -->
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

  </body>
</html>
